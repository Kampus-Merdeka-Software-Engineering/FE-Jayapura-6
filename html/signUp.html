<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up</title>
    <link rel="stylesheet" href="../style/style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
</head>
<body class="body-SISU">
    <!--Content-->
    <div class="form-signup">
        <form action="submit" id="signup-form">
            <div class="container">
                <h2>Sign Up</h2>
                <div class="form-groupSU">
                    <input type="email" name="Email" placeholder="Email">
                    <input type="text" name="Username" placeholder="Username">
                    <input type="text" name="Name" placeholder="Name">
                    <input type="tel" name="Phone" placeholder="Phone">
                    <input type="password" name="Password" placeholder="Password">
                </div>

                <button href="#" class="Signup"><strong>SIGN UP</strong></button>

                <div class="accountSU">
                    <p>Already a Member? <a href="../html/signIn.html"><strong>Log In</strong></a></p>
                    <!-- <button class="btn-Signup"><i class="fa-brands fa-facebook" style="color: #3b5998;"></i>Facebook</button>
                    <button class="btn-Signup"><i class="fa-brands fa-google" style="color: #3b5998;"></i>Google</button> -->
                </div>

                <div class="term">
                    <p>By signing up to create an account I accept Companyâ€™s<br><a href="#">Terms of Use and Privacy Policy.</a></p>
                </div>
            </div>
        </form>
    </div>        
    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('signup-form').addEventListener('submit', function (e) {
                e.preventDefault(); // Menghentikan aksi default formulir

                // Ambil data dari form
                const form = e.target;
                const username = form.querySelector('[name="Username"]').value;
                const name = form.querySelector('[name="Name"]').value;
                const email = form.querySelector('[name="Email"]').value;
                const phone = form.querySelector('[name="Phone"]').value;
                const password = form.querySelector('[name="Password"]').value;
                console.log("username" + username)
                console.log("password" + password)

                // Buat objek data
                const data = {
                    username: username,
                    name: name,
                    email: email,
                    phone: phone,
                    password: password,
                };

                // Kirim data ke server melalui Fetch API
                fetch('https://be-jayapura-6-production.up.railway.app/api/auth/register/', {
                    method: 'POST',
                    headers: {
                    'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                    })
                .then(response => response.json())
                .then(data => {
                    console.log(data); // Tampilkan pesan dari server di console
                    if (data) {
                    // Register berhasil, Anda dapat melanjutkan ke halaman login
                    alert('Register berhasil');
                    // Contoh: Mengarahkan ke halaman login
                    window.location.href = './signIn.html';
                } else {
                    // Register gagal, tampilkan pesan kesalahan
                    alert('Register gagal.');
                }
                })
                .catch(error => {
                    console.error(error);
                });
            });
        });
    </script>
</body>
</html>

